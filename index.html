<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="徐奕峰 Eephone Xu"><title>Eephone's GIS Blog</title><meta name="description" content="A GISer's technical blog (2023 new start)"><meta name="keywords" content="Blog,博客,Hexo,GIS,Java,Vue"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.webp"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a class="current" href="/">Home</a></li><li> <a href="/archives">Archives</a></li><li> <a href="/tags">Tags</a></li><li> <a href="/about/me">About</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)" style="display:none;"> </a></li><li><a class="fa fa-search" onclick="openWindow();"></a></li></div><div class="avatar"><img src="/images/logo.webp"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:220px;" alt="favicon"><h3 title=""><a href="/">Eephone's GIS Blog</a></h3><div class="description"><p>A GISer's technical blog (2023 new start)</p></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/sheeyphone"><i class="fa fa-github"></i></a></li><li><a href="mailto:sheeyphone@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="http://sighttp.qq.com/authd?IDKEY=331659009"><i class="fa fa-qq"></i></a></li></ul></div></div><div class="footer"><div class="p"> <span> 全站CC-BY-SA-3.0 </span><i class="fa fa-star"></i><span> 徐奕峰 Eephone Xu</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><span>Anatolo </span></div><div class="beian"></div></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/2023/03/12/p20230312/">A beginner's guide to build a map website in React</a></h3></div><div class="post-content"><div class="card"><p><h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>As a GIS developer, I will change my role to a WebGIS Front-end developer when I need to build an interactive map to present some geographic data. Due to my latest work, I’m familiar with building it, using the VueJS framework, cause it’s prevalent among Chinese developers. Even though, thinking globally, the React framework holds the most significant proportion of all MVVM-driven and Front-end frameworks.</p>
<blockquote>
</blockquote>
<h1 id="Get-Started-with-React"><a href="#Get-Started-with-React" class="headerlink" title="Get Started with React"></a>Get Started with React</h1><p>If you are a Front-end Developer, and familiar with other frameworks rather than React. It would be so easy for you to build a React web application after learning React from its official tutorial. So, get your hands dirty, and here we go.</p>
<blockquote>
<p>React Offical Website <a target="_blank" rel="noopener" href="https://beta.reactjs.org/">https://beta.reactjs.org/</a></p>
</blockquote>
<h1 id="Create-a-single-page-WebApp"><a href="#Create-a-single-page-WebApp" class="headerlink" title="Create a single-page WebApp"></a>Create a single-page WebApp</h1><blockquote>
<p>Create React App is an officially supported way to create single-page React applications. It offers a modern build setup with no configuration.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app map-on-react</span><br><span class="line"><span class="built_in">cd</span> map-on-react</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>

<h1 id="Prepare-dependencies"><a href="#Prepare-dependencies" class="headerlink" title="Prepare dependencies"></a>Prepare dependencies</h1><h1 id="Build-the-map-component"><a href="#Build-the-map-component" class="headerlink" title="Build the map component"></a>Build the map component</h1><h1 id="Build-the-layer-component"><a href="#Build-the-layer-component" class="headerlink" title="Build the layer component"></a>Build the layer component</h1><h1 id="Compose-our-components"><a href="#Compose-our-components" class="headerlink" title="Compose our components"></a>Compose our components</h1><h1 id="Result-and-conclusion"><a href="#Result-and-conclusion" class="headerlink" title="Result and conclusion"></a>Result and conclusion</h1></p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-03-12</span><i class="fa fa-tag"></i><a class="tag" href="/tags/GIS/" title="GIS">GIS </a><i class="fa fa-tag"></i><a class="tag" href="/tags/React/" title="React">React </a><i class="fa fa-tag"></i><a class="tag" href="/tags/HTML5/" title="HTML5">HTML5 </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Javascript/" title="Javascript">Javascript </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Leaflet/" title="Leaflet">Leaflet </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Map/" title="Map">Map </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Beginner/" title="Beginner">Beginner </a><span class="leancloud_visitors"></span><span>About 177 words, 35 sec  read</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/2023/03/04/p20230304/">Helps you to gain an understanding of the GeoHash Algorithm step by step.</a></h3></div><div class="post-content"><div class="card"><p><h1 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h1><ol>
<li>What is the GeoHash Algorithm and why do we need it</li>
<li>How did the GeoHash split the world into a hash array</li>
<li>The calculating procedure</li>
<li>Verify the result</li>
</ol>
<h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="1-What-is-the-GeoHash-Algorithm-and-why-do-we-need-it"><a href="#1-What-is-the-GeoHash-Algorithm-and-why-do-we-need-it" class="headerlink" title="1. What is the GeoHash Algorithm and why do we need it"></a>1. What is the GeoHash Algorithm and why do we need it</h2><h2 id="2-How-did-the-GeoHash-split-the-world-into-a-hash-array"><a href="#2-How-did-the-GeoHash-split-the-world-into-a-hash-array" class="headerlink" title="2. How did the GeoHash split the world into a hash array"></a>2. How did the GeoHash split the world into a hash array</h2><h2 id="3-The-calculating-procedure"><a href="#3-The-calculating-procedure" class="headerlink" title="3. The calculating procedure"></a>3. The calculating procedure</h2><h2 id="4-Verify-the-result"><a href="#4-Verify-the-result" class="headerlink" title="4. Verify the result"></a>4. Verify the result</h2><h1 id="References-amp-Documentations"><a href="#References-amp-Documentations" class="headerlink" title="References &amp; Documentations"></a>References &amp; Documentations</h1><p><strong><em>GeoHash Wikipedia</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Geohash">https://en.wikipedia.org/wiki/Geohash</a></p>
<p><strong><em>GeoHash Explorer</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://geohash.softeng.co/">https://geohash.softeng.co/</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-03-04</span><i class="fa fa-tag"></i><a class="tag" href="/tags/GIS/" title="GIS">GIS </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Spatial-Indexing/" title="Spatial Indexing">Spatial Indexing </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Spatial-Algorithm/" title="Spatial Algorithm">Spatial Algorithm </a><i class="fa fa-tag"></i><a class="tag" href="/tags/GeoHash/" title="GeoHash">GeoHash </a><span class="leancloud_visitors"></span><span>About 73 words, 14 sec  read</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/2023/02/26/p20230226/">A simple way to import raster data into the PostGIS database</a></h3></div><div class="post-content"><div class="card"><p><h1 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h1><ol>
<li>Installing the PostGIS Database</li>
<li>Enabling the raster extension in PostGIS</li>
<li>Preparing or creating the raster data</li>
<li>Knowing about the Raster WKB&#x2F;WKT format</li>
<li>Creating the importation-SQL file to execute</li>
</ol>
<h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="1-Installing-the-PostGIS-Database"><a href="#1-Installing-the-PostGIS-Database" class="headerlink" title="1. Installing the PostGIS Database"></a>1. Installing the PostGIS Database</h2><p>The easiest way to install the PostGIS database is using Docker, or you could choose another way to install it. Hence, install the Docker environment and docker-compose plugin on your computer, and here, the hyperlink below is the tutorial and documentation of how to install Docker.</p>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Docker Engine installation overview | Docker Documentation</a></p>
<p>Whether the Docker has already installed, you could use docker-compose to run the database by configuring the docker-compose.yml file. The configuration file example is below the paragraph.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">pgdb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&quot;postgis/postgis:15-master&quot;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">pgdb</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">POSTGRES_DB:</span> <span class="string">gis_data</span></span><br><span class="line">      <span class="attr">POSTGRES_USER:</span> <span class="string">xyf</span></span><br><span class="line">      <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">xyf</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/data/postgis/data/:/var/lib/postgresql/data/&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/data/postgis/tmp/:/tmp&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5432:5432&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;enet&quot;</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">enet:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;enet&quot;</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>Once you have done it and the PostGIS database has been running well, you could make a connection to the database, using the DBMS application such as DBeaver or GIS application addressed QGIS.</p>
<h2 id="2-Enabling-the-raster-extension-in-PostGIS"><a href="#2-Enabling-the-raster-extension-in-PostGIS" class="headerlink" title="2. Enabling the raster extension in PostGIS"></a>2. Enabling the raster extension in PostGIS</h2><p>There are a few extensions supported by PostGIS spatial engine. The default running configuration shows that 3 of these extensions have been enabled. But it was unfortunate to say the raster extension is not enabled by default way. So we should switch on it by ourselves.<br>The first step is to make your command line jump into the docker container, which is the database container you have created before.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it pgdb /bin/bash</span><br></pre></td></tr></table></figure>

<p>After entering the container bash, you could connect to the database by using the command line tool that Postgres offered and named ‘psql’. It’s pretty easy to do. In addition, here are some explanations about the parameters. ‘-U’ is the user and ‘-d’ is the database name. I hope you could find it in the docker-compose configuration file that we have mentioned before.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -U xyf -d gis_data</span><br></pre></td></tr></table></figure>

<p>After you finish your connection, I would say ‘Congratulation!’ to you and give you the instruction for the next step. These three SQL commands below will help you to enable the postgis_raster extension, and the gdal_drivers and query the status of the available extensions. You would see the result of your query formed as a table heading the name, default_version and installed_version. So easy, isn’t it? Make sure the installed_version of postgis_raster, yes the column is not <code>NULL</code>.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> EXTENSION postgis_raster;</span><br><span class="line"><span class="keyword">SET</span> postgis.gdal_enabled_drivers <span class="operator">=</span> <span class="string">&#x27;ENABLE_ALL&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> name, default_version,installed_version</span><br><span class="line"> <span class="keyword">FROM</span> pg_available_extensions <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;postgis%&#x27;</span> <span class="keyword">or</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;address%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3-Preparing-or-creating-the-raster-data"><a href="#3-Preparing-or-creating-the-raster-data" class="headerlink" title="3. Preparing or creating the raster data"></a>3. Preparing or creating the raster data</h2><p>I’m sure that you are sure that one of the key steps we should do before importing raster data into the database is owing the raster data. Haha, if you don’t have your own raster data. You could create it using QGIS with the tools called Interpolation or so on. Then, export it into the GeoTiff format and copy or move the GeoTiff file you exported to the file path you have configured on docker-compose.yml and go through our next step.</p>
<p><img src="/images/p20230226_p1.png" alt="Test Raster" title="Test Raster"><br><img src="/images/p20230226_p2.png" alt="Raster Data" title="Raster Data"></p>
<p><code>Suggestions: DO NOT MAKE A LARGE RASTER DATA OR YOU WOULD CRY ON IT!</code></p>
<h2 id="4-Knowing-about-the-Raster-WKB-x2F-WKT-format"><a href="#4-Knowing-about-the-Raster-WKB-x2F-WKT-format" class="headerlink" title="4. Knowing about the Raster WKB&#x2F;WKT format"></a>4. Knowing about the Raster WKB&#x2F;WKT format</h2><p>How does the PostGIS database store the raster data? It’s a pretty good question. As we know that PostGIS store the vector data with data type ‘geometry_column’ or ‘geom’. And the way to store raster data is familiar with it, demonstrating a new data type called ‘raster’ or ‘rast’. When you make a selection by querying some raster data on a database. You would see the HEX result looks like ‘01000001CDDB….’ and it is the WKB&#x2F;WKT data format of a raster. About all, the key to importing raster data into the PostGIS database is converting your own raster data into WKB&#x2F;WKT raster format.</p>
<blockquote>
<p>You may find out the attributes of Raster WKB&#x2F;WKT by clicking the link below.<br><a target="_blank" rel="noopener" href="https://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01">WKTRaster&#x2F;Documentation01 – PostGIS (osgeo.org)</a></p>
</blockquote>
<h2 id="5-Creating-the-importation-sql-file-to-execute"><a href="#5-Creating-the-importation-sql-file-to-execute" class="headerlink" title="5. Creating the importation-sql file to execute"></a>5. Creating the importation-sql file to execute</h2><p>I would say it’s much more convenient to make the conversion by using the script or tool that PostGIS has already done before, named ‘raster2pgsql’. You could find the usage of ‘raster2pgsql’ via the command ‘raster2pgsql’ after we jump into the container in which the database is running on it. We should find out and reach the path where the testing GeoTiff is waiting for us.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raster2pgsql -s 4326 -I -C /tmp/test.tif nc.test_raster &gt; test.sql</span><br></pre></td></tr></table></figure>

<p>We may specify the SRID of our raster in the progress, and the example illustrates the parameter with ‘-s 4326’. You could get the explanations about parameters ‘-I’ and ‘-C’ by yourself. ‘&#x2F;tmp&#x2F;test.tif’ is the file path of your GeoTiff file. ‘nc.test_raster’ shows the schema with ‘nc’ and the table name is ‘test_raster’. Finally, the SQL file would be created into the path you running this command and named test.sql.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;nc&quot;.&quot;test_raster&quot; (&quot;rid&quot; serial <span class="keyword">PRIMARY</span> KEY,&quot;rast&quot; raster);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> &quot;nc&quot;.&quot;test_raster&quot; (&quot;rast&quot;) <span class="keyword">VALUES</span> (<span class="string">&#x27;010000010019CC5D8DE459B93F14F061B29570B9BFD174763238005C403E7799994DC0374000000000000000000000000000000000E610000029001A004B000000008087C3C0F355F2B1BB1C394014ED2AA4FC3C39409A780778D25E394016FC36C478813940B1FB8EE1B1A339407714E7A8A3C33940FA4674CFBADE3940111B2C9CA4F13940DAE3857478F839402CF180B229EF3940EB724A404CD23940778192020BA0394083A7902BF55......&#x27;</span>::raster);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX <span class="keyword">ON</span> &quot;nc&quot;.&quot;test_raster&quot; <span class="keyword">USING</span> gist (st_convexhull(&quot;rast&quot;));</span><br><span class="line">ANALYZE &quot;nc&quot;.&quot;test_raster&quot;;</span><br><span class="line"><span class="keyword">SELECT</span> AddRasterConstraints(<span class="string">&#x27;nc&#x27;</span>,<span class="string">&#x27;test_raster&#x27;</span>,<span class="string">&#x27;rast&#x27;</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">FALSE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>You could execute this SQL script using DBeaver, and the ‘nc.test_raster’ would be imported into the database, or you visual it by using QGIS, connecting the database and dropping it into the layers panel. That’s all.</p>
<p><img src="/images/p20230226_p3.png" alt="Finally" title="Finally"><br><img src="/images/p20230226_p4.png" alt="Layer" title="Layer"></p>
<h1 id="References-amp-Documentations"><a href="#References-amp-Documentations" class="headerlink" title="References &amp; Documentations"></a>References &amp; Documentations</h1><p><strong><em>raster2pgsql</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://postgis.docs.acugis.com/en/latest/components/raster2pgsql/index.html#documentation">https://postgis.docs.acugis.com/en/latest/components/raster2pgsql/index.html#documentation</a></p>
<p><strong><em>using_raster_dataman</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://postgis.net/docs/using_raster_dataman.html#RT_Raster_Loader">https://postgis.net/docs/using_raster_dataman.html#RT_Raster_Loader</a></p>
<p><strong><em>docker_hub_postgis</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/postgis/postgis">https://hub.docker.com/r/postgis/postgis</a></p>
<p><strong><em>WKTRaster</em></strong></p>
<p><a target="_blank" rel="noopener" href="https://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01">https://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-02-26</span><i class="fa fa-tag"></i><a class="tag" href="/tags/GIS/" title="GIS">GIS </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Data-importation/" title="Data importation">Data importation </a><i class="fa fa-tag"></i><a class="tag" href="/tags/PostGIS/" title="PostGIS">PostGIS </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Raster/" title="Raster">Raster </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Database/" title="Database">Database </a><span class="leancloud_visitors"></span><span>About 1182 words, 3 min 56 sec  read</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/2023/02/22/p20230222/">Introduce how to import GeoJSON data into MongoDB</a></h3></div><div class="post-content"><div class="card"><p><h1 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h1><ol>
<li>Get ready for your GeoJSON data</li>
<li>Convert GeoJSON data to JsonArray data for importation</li>
<li>Use MongoDB command line tool to import data</li>
<li>Finally, import the data successfully and find them</li>
</ol>
<h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="1-Get-ready-for-your-GeoJSON-data"><a href="#1-Get-ready-for-your-GeoJSON-data" class="headerlink" title="1. Get ready for your GeoJSON data"></a>1. Get ready for your GeoJSON data</h2><blockquote>
<p>GeoJSON is a format for encoding a variety of geographic data structures. A GeoJSON object may represent a geometry, a feature, or a collection of features. GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection.</p>
</blockquote>
<p>The codes below demonstrate a simple GeoJSON file, which is constructed with 4-point features. You could copy the text and paste into your text editor and save it with the <code>.geojson</code> suffix, and load the file you saved into a GIS application like QGIS or ArcMap.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FeatureCollection&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;earthquakes&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;crs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;urn:ogc:def:crs:OGC:1.3:CRS84&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;features&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Feature&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;DateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1970/01/04 17:00:40.20&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Latitude&quot;</span><span class="punctuation">:</span> <span class="number">24.139</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Longitude&quot;</span><span class="punctuation">:</span> <span class="number">102.503</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Depth&quot;</span><span class="punctuation">:</span> <span class="number">31.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Magnitude&quot;</span><span class="punctuation">:</span> <span class="number">7.5</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MagType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ms&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;NbStations&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Gap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Distance&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;RMS&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NEI&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;EventID&quot;</span><span class="punctuation">:</span> <span class="number">1970010440</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;geometry&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Point&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;coordinates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">102.503</span><span class="punctuation">,</span> <span class="number">24.139</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Feature&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;DateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1970/01/06 05:35:51.80&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Latitude&quot;</span><span class="punctuation">:</span> <span class="number">-9.628</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Longitude&quot;</span><span class="punctuation">:</span> <span class="number">151.458</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Depth&quot;</span><span class="punctuation">:</span> <span class="number">8.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Magnitude&quot;</span><span class="punctuation">:</span> <span class="number">6.2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MagType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ms&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;NbStations&quot;</span><span class="punctuation">:</span> <span class="number">85</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Gap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Distance&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;RMS&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NEI&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;EventID&quot;</span><span class="punctuation">:</span> <span class="number">1970010640</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;geometry&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Point&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;coordinates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">151.458</span><span class="punctuation">,</span> <span class="number">-9.628</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Feature&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;DateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1970/01/08 17:12:39.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Latitude&quot;</span><span class="punctuation">:</span> <span class="number">-34.741</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Longitude&quot;</span><span class="punctuation">:</span> <span class="number">178.568</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Depth&quot;</span><span class="punctuation">:</span> <span class="number">179.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Magnitude&quot;</span><span class="punctuation">:</span> <span class="number">6.1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MagType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mb&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;NbStations&quot;</span><span class="punctuation">:</span> <span class="number">59</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Gap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Distance&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;RMS&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NEI&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;EventID&quot;</span><span class="punctuation">:</span> <span class="number">1970010840</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;geometry&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Point&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;coordinates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">178.568</span><span class="punctuation">,</span> <span class="number">-34.741</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Feature&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;DateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1970/01/10 12:07:08.60&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Latitude&quot;</span><span class="punctuation">:</span> <span class="number">6.825</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Longitude&quot;</span><span class="punctuation">:</span> <span class="number">126.737</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Depth&quot;</span><span class="punctuation">:</span> <span class="number">73.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Magnitude&quot;</span><span class="punctuation">:</span> <span class="number">6.1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MagType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mb&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;NbStations&quot;</span><span class="punctuation">:</span> <span class="number">91</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Gap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Distance&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;RMS&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NEI&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;EventID&quot;</span><span class="punctuation">:</span> <span class="number">1970011040</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;geometry&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Point&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;coordinates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">126.737</span><span class="punctuation">,</span> <span class="number">6.825</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-Convert-GeoJSON-data-to-JsonArray-data-for-importation"><a href="#2-Convert-GeoJSON-data-to-JsonArray-data-for-importation" class="headerlink" title="2. Convert GeoJSON data to JsonArray data for importation"></a>2. Convert GeoJSON data to JsonArray data for importation</h2><p>The key thing to importing GeoJSON data into Mongodb is the file conversion from GeoJSON to JsonObject or JsonArray. In addition, there are a lot of ways to do so, but, I want to tell you the best way by using a tool called <code>jq</code>. (<a target="_blank" rel="noopener" href="https://stedolan.github.io/"> jq Official Website here!</a>)</p>
<p>When you finish your download, you could do the conversion by using the command below. Importantly, you must put your own configuration text to replace the text between the square brackets and remove the square brackets finally. Then, try it yourself.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jq --compact-output <span class="string">&quot;.features&quot;</span> <span class="string">&#x27;[Your GeoJSON File]&#x27;</span> &gt; <span class="string">&#x27;[GeoJSON File converted]&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Use-mongodb-command-line-tool-to-import-data"><a href="#3-Use-mongodb-command-line-tool-to-import-data" class="headerlink" title="3. Use mongodb command line tool to import data"></a>3. Use mongodb command line tool to import data</h2><p>In this step, you should check your system environment config and make sure the MongoDB client or command line tools have been installed well firstly. Then, you could use the command below and replace the content between square brackets as you do well in the previous step.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoimport -u <span class="string">&#x27;[Your MongoDB User]&#x27;</span> --password <span class="string">&#x27;[Your Password]&#x27;</span> --db <span class="string">&#x27;[Database to Import]&#x27;</span> -c <span class="string">&#x27;[Collection to Import]&#x27;</span> --file <span class="string">&#x27;[Path to Your GeoJSON File]&#x27;</span> --jsonArray <span class="string">&#x27;[MongoDB Connection String]&#x27;</span></span><br></pre></td></tr></table></figure>

<p>Here is the positive result that tells you which MongoDB has been connected and how many documents have been imported.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connected to: mongodb://***********</span><br><span class="line">4 document(s) imported successfully. 0 document(s) failed to import.</span><br></pre></td></tr></table></figure>

<h2 id="4-Finally-import-the-data-successfully-and-find-them"><a href="#4-Finally-import-the-data-successfully-and-find-them" class="headerlink" title="4. Finally, import the data successfully and find them"></a>4. Finally, import the data successfully and find them</h2><p>Use MongoDB Client to find or query the data from the collection you have created. And, here is the result.</p>
<p><img src="/images/p20230222_p1.png" alt="Query Result" title="Query Result"></p>
<h1 id="References-amp-Documentations"><a href="#References-amp-Documentations" class="headerlink" title="References &amp; Documentations"></a>References &amp; Documentations</h1><h3 id="GeoJSON-Documentation"><a href="#GeoJSON-Documentation" class="headerlink" title="GeoJSON Documentation"></a>GeoJSON Documentation</h3><p><a target="_blank" rel="noopener" href="https://geojson.org/geojson-spec">https://geojson.org/geojson-spec</a></p>
<h3 id="MongoDB-geospatial"><a href="#MongoDB-geospatial" class="headerlink" title="MongoDB geospatial"></a>MongoDB geospatial</h3><p><a target="_blank" rel="noopener" href="https://www.mongodb.com/docs/manual/geospatial-queries/#std-label-geospatial-geojson">https://www.mongodb.com/docs/manual/geospatial-queries/#std-label-geospatial-geojson</a></p>
<h3 id="jq-tools-Offical-Website"><a href="#jq-tools-Offical-Website" class="headerlink" title="jq-tools Offical Website"></a>jq-tools Offical Website</h3><p><a target="_blank" rel="noopener" href="https://stedolan.github.io/jq/">https://stedolan.github.io/jq/</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-02-22</span><i class="fa fa-tag"></i><a class="tag" href="/tags/GIS/" title="GIS">GIS </a><i class="fa fa-tag"></i><a class="tag" href="/tags/GeoJSON/" title="GeoJSON">GeoJSON </a><i class="fa fa-tag"></i><a class="tag" href="/tags/MongoDB/" title="MongoDB">MongoDB </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Data-importation/" title="Data importation">Data importation </a><span class="leancloud_visitors"></span><span>About 724 words, 2 min 24 sec  read</span></div></div></div></div><div class="pagination"><ul class="clearfix"></ul></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)",},CONTENT_URL:"/content.json",};window.INSIGHT_CONFIG=INSIGHT_CONFIG})(window);</script><script src="/js/insight.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="Search..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div></body></html>